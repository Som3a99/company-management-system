@using ERP.PL.ViewModels.Pagination
@model PaginationInfoViewModel

@{
    var searchTerm = ViewData["SearchTerm"] as string;
    var pageSize = Model.PageSize;
    var action = ViewContext.RouteData.Values["action"] as string;
    var controller = ViewContext.RouteData.Values["controller"] as string;
    var itemName = ViewData["ItemName"] as string ?? "items";
}

@if (Model.TotalPages > 1)
{
    <div class="pagination animate-in">
        @if (Model.HasPreviousPage)
        {
            <a asp-controller="@controller" asp-action="@action"
               asp-route-pageNumber="@(Model.PageNumber - 1)"
               asp-route-pageSize="@pageSize"
               asp-route-searchTerm="@searchTerm">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                Previous
            </a>
        }
        else
        {
            <span class="disabled">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                Previous
            </span>
        }

        @{
            var startPage = Math.Max(1, Model.PageNumber - 2);
            var endPage = Math.Min(Model.TotalPages, Model.PageNumber + 2);

            if (startPage > 1)
            {
                <a asp-controller="@controller" asp-action="@action"
                   asp-route-pageNumber="1"
                   asp-route-pageSize="@pageSize"
                   asp-route-searchTerm="@searchTerm">1</a>
                if (startPage > 2)
                {
                    <span>...</span>
                }
            }

            for (var i = startPage; i <= endPage; i++)
            {
                if (i == Model.PageNumber)
                {
                    <span class="active">@i</span>
                }
                else
                {
                    <a asp-controller="@controller" asp-action="@action"
                       asp-route-pageNumber="@i"
                       asp-route-pageSize="@pageSize"
                       asp-route-searchTerm="@searchTerm">@i</a>
                }
            }

            if (endPage < Model.TotalPages)
            {
                if (endPage < Model.TotalPages - 1)
                {
                    <span>...</span>
                }
                <a asp-controller="@controller" asp-action="@action"
                   asp-route-pageNumber="@Model.TotalPages"
                   asp-route-pageSize="@pageSize"
                   asp-route-searchTerm="@searchTerm">@Model.TotalPages</a>
            }
        }

        @if (Model.HasNextPage)
        {
            <a asp-controller="@controller" asp-action="@action"
               asp-route-pageNumber="@(Model.PageNumber + 1)"
               asp-route-pageSize="@pageSize"
               asp-route-searchTerm="@searchTerm">
                Next
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </a>
        }
        else
        {
            <span class="disabled">
                Next
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </span>
        }
    </div>

    <div class="text-center mt-3 text-muted small">
        Showing @Model.StartIndex - @Model.EndIndex of @Model.TotalCount @itemName
    </div>
}