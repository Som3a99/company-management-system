@model ERP.DAL.Models.Employee

@{
    ViewData["Title"] = "Delete Employee";
    var tenure = DateTime.Now.Year - Model.HireDate.Year;
    var tenureText = tenure > 0 ? $"{tenure} year{(tenure != 1 ? "s" : "")}" : "Less than 1 year";
}

<div class="container-fluid px-4">
    <div class="page-header animate-in" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);">
        <div class="container-fluid px-4">
            <div class="d-flex align-items-center gap-3 mb-2">
                <div class="d-flex align-items-center justify-content-center" style="width: 48px; height: 48px; background: rgba(255, 255, 255, 0.2); border-radius: var(--radius-md);">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <line x1="12" y1="9" x2="12" y2="13" stroke="white" stroke-width="2" stroke-linecap="round" />
                        <line x1="12" y1="17" x2="12.01" y2="17" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </div>
                <div>
                    <h1 class="mb-0">Delete Employee Record</h1>
                </div>
            </div>
            <p class="mb-0">This action will permanently remove the employee from the system and cannot be undone</p>
        </div>
    </div>

    <div class="row animate-in">
        <div class="col-lg-10 col-xl-8 mx-auto">
            <div class="card mb-4" style="border: 2px solid var(--danger);">
                <div class="card-header-custom" style="background-color: #fef2f2; border-bottom: 2px solid var(--danger);">
                    <div class="d-flex align-items-center gap-2">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="#dc2626" stroke-width="2" />
                            <path d="M12 8v4M12 16h.01" stroke="#dc2626" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <span style="color: #dc2626; font-weight: 600;">Confirm Employee Deletion</span>
                    </div>
                </div>
                <div class="card-body p-4">
                    <!-- Critical Warning -->
                    <div class="alert alert-danger d-flex align-items-start gap-3 mb-4" style="background-color: #fef2f2; border: 1px solid #fecaca;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0; margin-top: 2px;">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="#dc2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <line x1="12" y1="9" x2="12" y2="13" stroke="#dc2626" stroke-width="2" stroke-linecap="round" />
                            <line x1="12" y1="17" x2="12.01" y2="17" stroke="#dc2626" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <div style="color: #991b1b;">
                            <strong style="display: block; margin-bottom: 4px;">Critical Warning: Permanent Action</strong>
                            <small>You are about to permanently delete this employee record. This action is irreversible and will remove all associated data from the system.</small>
                        </div>
                    </div>

                    <!-- Employee Information Display -->
                    <div class="mb-4">
                        <h5 class="mb-3 fw-semibold" style="color: var(--gray-900);">Employee Information</h5>

                        <!-- Employee Header -->
                        <div class="p-4 mb-3" style="background: linear-gradient(135deg, var(--gray-700) 0%, var(--gray-800) 100%); border-radius: var(--radius-lg); color: white;">
                            <div class="d-flex align-items-center gap-3">
                                <div class="d-flex align-items-center justify-content-center" style="width: 56px; height: 56px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; flex-shrink: 0;">
                                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        <circle cx="12" cy="7" r="4" stroke="white" stroke-width="2" />
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="mb-1">@Model.FirstName @Model.LastName</h4>
                                    <p class="mb-0 opacity-75">@Model.Postion</p>
                                </div>
                            </div>
                        </div>

                        <!-- Details Grid -->
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Employee ID</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    <span class="table-code">@Model.Id</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Employment Status</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    @if (Model.IsActive)
                                    {
                                        <span class="badge" style="background-color: #dcfce7; color: #166534; padding: 0.375rem 0.75rem; border-radius: 0.375rem; font-weight: 500;">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: -1px;">
                                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                                <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                            Active Employee
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="badge" style="background-color: #f3f4f6; color: #4b5563; padding: 0.375rem 0.75rem; border-radius: 0.375rem; font-weight: 500;">
                                            Inactive Employee
                                        </span>
                                    }
                                </div>
                            </div>
                        </div>

                        <div class="row g-3 mt-1">
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Email Address</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    <div class="d-flex align-items-center gap-2">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                            <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                        <span style="color: var(--gray-700);">@Model.Email</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Phone Number</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    <div class="d-flex align-items-center gap-2">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                        <span style="color: var(--gray-700);">@Model.PhoneNumber</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3 mt-1">
                            <div class="col-md-4">
                                <label class="form-label text-muted small">Hire Date</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    <strong style="color: var(--gray-900);">@Model.HireDate.ToString("MMM dd, yyyy")</strong>
                                    <br>
                                    <small class="text-muted">@tenureText</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small">Annual Salary</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    <strong style="color: var(--accent-main); font-size: 1.125rem;">$@Model.Salary.ToString("N2")</strong>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small">Record Created</label>
                                <div class="p-3" style="background-color: var(--gray-50); border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
                                    <strong style="color: var(--gray-900);">@Model.CreatedAt.ToString("MMM dd, yyyy")</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Impact Warning -->
                    <div class="alert alert-warning d-flex align-items-start gap-3 mb-4" style="background-color: #fffbeb; border: 1px solid #fde68a;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0; margin-top: 2px;">
                            <circle cx="12" cy="12" r="10" stroke="#f59e0b" stroke-width="2" />
                            <path d="M12 16v-4M12 8h.01" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <div style="color: #92400e;">
                            <strong style="display: block; margin-bottom: 4px;">Deletion Impact Assessment</strong>
                            <ul class="mb-0 ps-3" style="font-size: 0.875rem;">
                                <li>All employee records and personal information will be permanently deleted</li>
                                <li>Historical payroll and attendance data will lose employee references</li>
                                <li>Department assignments and team structures may be affected</li>
                                <li>Reports and analytics will show incomplete historical data</li>
                                <li>This action cannot be reversed - consider marking as "Inactive" instead</li>
                            </ul>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Action Buttons -->
                    <form asp-action="Delete" method="post">
                        <input type="hidden" asp-for="Id" />

                        <div class="d-flex gap-3 align-items-center flex-wrap">
                            <button type="submit" class="btn btn-danger btn-lg">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <polyline points="3 6 5 6 21 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="10" y1="11" x2="10" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                    <line x1="14" y1="11" x2="14" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                </svg>
                                <span>Yes, Permanently Delete Employee</span>
                            </button>
                            <a asp-action="Index" class="btn btn-secondary btn-lg">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span>No, Keep This Employee</span>
                            </a>
                        </div>

                        <p class="text-muted small mt-3 mb-0">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: -2px;">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            By clicking "Yes, Permanently Delete Employee", you acknowledge that this action is irreversible and will permanently remove all employee data from the system.
                        </p>
                    </form>
                </div>
            </div>

            <!-- Alternative Actions Card -->
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="card" style="border-color: var(--gray-300);">
                        <div class="card-body p-4 text-center">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-3" style="color: var(--accent-main);">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <h6 class="mb-2" style="color: var(--gray-900);">Need to Make Changes?</h6>
                            <p class="text-muted small mb-3">Edit employee information instead of deleting</p>
                            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-outline-secondary w-100">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Edit Employee
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card" style="border-color: var(--gray-300);">
                        <div class="card-body p-4 text-center">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-3" style="color: var(--warning);">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <h6 class="mb-2" style="color: var(--gray-900);">Recommended Alternative</h6>
                            <p class="text-muted small mb-3">Mark as inactive to preserve history</p>
                            <div class="alert alert-info mb-0" style="background-color: #eff6ff; border: 1px solid #bfdbfe; text-align: left;">
                                <small style="color: #1e40af;">
                                    <strong>Tip:</strong> Setting an employee to "Inactive" status preserves all historical data while excluding them from active reports and workflows.
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>